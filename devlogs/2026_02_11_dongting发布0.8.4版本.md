今天是2026年2月11日，自从我开始做dongting这个项目以来，已经过去了3年半零3天，
今天第一个正式版本0.8.4发布了！

如果你还不知道它是什么，我简单介绍一下。dongting是一个用Java开发的raft框架，内置一个K/V状态机DtKV，大致和etcd差不多，
但是性能和扩展性远超etcd（kv相关的功能综合来说比etcd要少一些）。本项目有两大追求：

* 10倍性能。采用面向性能编程（Performance Oriented Programming）的方式开发，这词我发明的，哈哈。
* 0依赖，生成产物小于1MB，可嵌入。

今天，这两个目标达成了。

自从2022年辞职启动这个项目以来，当时我随口一说要用3年时间干这事，没想到真搞了这么久啊，之前想要做的MQ也还没有开始做，可以说耗时远超预期，
要是在公司早就被开除了啊。

其中一个原因是个人投入方面的，刚开始的时候还能保持比较高的效率，但是越到后来越懒散，到2024年达到顶峰，热情会磨损，
一个人做这东西实在太无聊、太酸爽了。后面慢慢开始好转，是因为逐渐有了一定程度上可以运行的产物，有一些正反馈了。。。

另一个原因，就是前面定的两个追求拖累的，说起来爽做起来难啊。

想使用RPC？自己做个框架吧。

想要buffer池？自己写的又不是不能用。

想解析protobuf？自己写个类去解析吧，对了，为了性能，网络对面发来一个半包的时候，不要做内存拷贝哦。

存储库是不可能有存储库的，自己写文件去。

想打点看下性能统计？Prometheus是没有的，不过可以留下扩展点。收集数据的时候，能用System.currentTimeMillis()就不要用System.nanoTime()，
后者开销大多了，循环里面前者也尽量减少的调用，能省点是点。

为了提升性能要做成异步的，所有的地方都不能堵塞，但这异步开发也太麻烦了，同步开发一个try/catch就完事的异常处理，
异步情况下一个地方没处理整个链就断了。再比要等待特定的条件，类似线程之间的协作，异步场景几乎要没法弄。最后只好自己做了
个简陋的协程框架。

这。。。手撸每一个轮子，是真的酸爽啊。两个目标但凡放弃一个，就能极大的提高开发效率，都放弃就能起飞，性能也可以做到很高，依赖也可以
不那么多的。但是已经上路了，只能含泪完成。。。我都后悔给自己找了这么个破事。

好在这破事终于阶段性完成了。

性能方面，吞吐也就是etcd的十多倍吧，latency也要低很多。在我的mac和pc上测试都能轻松单机百万TPS。不过这个数据是client异步
发送RPC请求才能达到的，如果是多（虚拟）线程同步请求，大概就只有etcd的7倍左右了。单机测试虚拟线程在三四千左右的时候达到吞吐顶峰，
再加多也没用了。

大小方面，如果只用dongting-client.jar，大小330KB，如果嵌入server，合计912KB，也达到了小于1MB的目标。

如果继续做的话，后面无非就两件事。一个是完成MQ，另一个是io_uring改造，以便在更加真实的多连接高并发环境中减少性能损失。

但是这些都不重要了。就在我启动这个项目后不久，OpenAI发布了一个叫ChatGPT的东西，几年下来所有人都浮躁了，我认真做事还要被贴上“古法”标签。
最后弄出来个东西，是不是又成了AI使用的一个轮子？还有意义吗？我还有很多别的想做的事情，可以去做吗？

其实我用过几乎所有的AI模型，很多AI IDE/CLI，订阅了国内大部分编码套餐，都快要可以出评测了。
但这个项目确实是“古法”打造的，AI能做的有限，原因简单说就是因为它蠢，vibe code想都不要想，它能帮忙把找到bug或提供线索，
简单场景生成的代码不要让我改太多就谢天谢地了。当然，这是就目前而言，以后可不知道。

接下来让我想想下一步怎么搞吧。